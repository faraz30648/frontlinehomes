<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>All Properties | Frontline Homes</title>

<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet">

<style>
/* ===== BASE ===== */
:root{
  --brand-gold:#d4af37;
  --text:#1f2937;
  --muted:#6b7280;
  --glass:rgba(255,255,255,.75);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Manrope,system-ui,sans-serif;
  color:var(--text);
}
body::before{
  content:"";
  position:fixed;
  inset:-20px;
  background:url("https://images.unsplash.com/photo-1600585154340-be6161b89a0c");
  background-size:cover;
  background-position:center;
  filter:blur(22px) brightness(.75);
  z-index:-1;
}

.container{max-width:1200px;margin:auto;padding:28px}
.glass{
  background:var(--glass);
  backdrop-filter:blur(18px);
  border:1px solid rgba(255,255,255,.4);
  border-radius:26px;
}

/* ===== HEADER ===== */
header{
  position:sticky;top:0;z-index:10;
  background:rgba(255,255,255,.75);
  backdrop-filter:blur(20px);
}
.nav{display:flex;justify-content:space-between;align-items:center;gap:18px}
.nav a{text-decoration:none;color:var(--text);font-weight:600}

/* ===== FILTERS ===== */
.filters{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  margin:22px 0 28px;
}
select{
  padding:10px 16px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.2);
  font-family:inherit;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:28px;
}

/* ===== CARD ===== */
.card{
  background:#fff;
  border-radius:24px;
  overflow:hidden;
  box-shadow:0 20px 50px rgba(0,0,0,.14);
  transition:.35s;
}
.card:hover{transform:translateY(-6px)}

.card img{
  width:100%;
  height:200px;
  object-fit:cover;
}
.card-body{padding:18px}

.card-body h3{margin:0;font-size:18px}
.card-sub{font-size:13px;color:var(--muted)}
.card-builder{
  font-size:12px;
  margin-top:6px;
  padding-left:10px;
  border-left:2px solid var(--brand-gold);
}

.card-actions{
  display:flex;
  gap:10px;
  margin-top:16px;
}
.btn-pill{
  flex:1;
  padding:10px;
  border-radius:999px;
  font-size:13px;
  border:1px solid rgba(0,0,0,.2);
  background:#fff;
  cursor:pointer;
}
.btn-pill.primary{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  border:none;
}

/* ===== MODAL ===== */
.modal-backdrop{
  position:fixed;inset:0;
  display:none;
  background:rgba(0,0,0,.5);
  align-items:center;
  justify-content:center;
  z-index:50;
}
.modal-backdrop.open{display:flex}

.modal{
  width:90%;
  max-width:900px;
  background:#fff;
  border-radius:26px;
  overflow:hidden;
}
.modal-body{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:20px;
  padding:20px;
}
.modal-details{
  line-height:1.6;
}
.modal-main-list{
  list-style:none;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.modal-main-list li{
  display:flex;
  gap:10px;
  align-items:flex-start;
}
.modal-main-list i{
  color:var(--brand-gold);
}
.btn-ghost-pill{
  padding:10px 16px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.25);
  background:#fff;
  text-decoration:none;
  display:inline-flex;
  gap:8px;
  align-items:center;
}
.btn-ghost-pill.schedule{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  border:none;
}

@media(max-width:820px){
  .modal-body{grid-template-columns:1fr}
}
</style>
</head>

<body>

<header>
  <div class="container nav">
    <a href="index.html">← Back to home</a>
    <strong>All Properties</strong>
  </div>
</header>

<section class="container glass">
  <div class="filters">
    <select id="type"></select>
    <select id="locality"></select>
    <select id="config"></select>
    <select id="builder"></select>
  </div>
  <div class="grid" id="grid"></div>
</section>

<!-- MODAL -->
<div class="modal-backdrop" id="modal">
  <div class="modal">
    <div class="modal-body">
      <img id="modalImg" style="width:100%;border-radius:18px">
      <div class="modal-details">
        <h3 id="modalTitle"></h3>
        <p id="modalSub"></p>
        <ul class="modal-main-list" id="modalList"></ul>

        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
          <a href="#" target="_blank" class="btn-ghost-pill">
            <i class="ri-external-link-line"></i> View brochure
          </a>
          <a href="https://wa.me/917019285746" target="_blank" class="btn-ghost-pill schedule">
            <i class="ri-calendar-check-line"></i> Schedule site visit
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const SHEET_URL="https://script.google.com/macros/s/AKfycbyjZexXr0y3PqDoGB0AwF-ecID7M9NwLsmf9u6--Jh1bNNSjtQy8sNhLB_8id-GJ8PAUw/exec";

let properties=[];
const grid=document.getElementById("grid");

const typeF=document.getElementById("type");
const locF=document.getElementById("locality");
const confF=document.getElementById("config");
const builderF=document.getElementById("builder");

function fillSelect(sel,key,label){
  const v=[...new Set(properties.map(p=>(p[key]||"").trim()).filter(Boolean))];
  sel.innerHTML=`<option value="all">All ${label}</option>`+v.map(x=>`<option>${x}</option>`).join("");
}

function matches(p){
  return(
    (typeF.value==="all"||p.Type===typeF.value)&&
    (locF.value==="all"||p.Locality===locF.value)&&
    (confF.value==="all"||p.Configuration===confF.value)&&
    (builderF.value==="all"||p.Builder===builderF.value)
  );
}

function render(){
  grid.innerHTML="";
  properties.filter(matches).forEach(p=>{
    grid.innerHTML+=`
      <div class="card">
        <img src="${(p.Photos||"").split(",")[0]||""}">
        <div class="card-body">
          <h3>${p.Property}</h3>
          <div class="card-sub">${p.Locality} · ${p.Configuration}</div>
          <div class="card-builder">Builder: ${p.Builder||"N/A"}</div>
          <div class="card-actions">
            <button class="btn-pill" onclick="openModal('${p.Property}','${p.Locality}','${p.Builder}')">
              View more details
            </button>
            <a class="btn-pill primary" target="_blank"
              href="https://wa.me/917019285746?text=Interested in ${p.Property}">
              Enquire
            </a>
          </div>
        </div>
      </div>`;
  });
}

function openModal(t,l,b){
  modal.style.display="flex";
  modalTitle.textContent=t;
  modalSub.textContent=l;
  modalList.innerHTML=`
    <li><i class="ri-check-line"></i><span>Builder: ${b||"N/A"}</span></li>
  `;
}
modal.onclick=e=>{if(e.target.id==="modal")modal.style.display="none"}

fetch(SHEET_URL)
.then(r=>r.json())
.then(d=>{
  properties=d;
  fillSelect(typeF,"Type","types");
  fillSelect(locF,"Locality","localities");
  fillSelect(confF,"Configuration","configs");
  fillSelect(builderF,"Builder","builders");
  render();
});
[typeF,locF,confF,builderF].forEach(f=>f.onchange=render);
</script>

</body>
</html>
